<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
	<!-- Back to top button -->
	<h:panelGroup layout="block" styleClass="row affix" id="top-link-container">
		<h:panelGroup id="top-link-block">
		    <a href="#top" class="well well-sm">
		        <h:panelGroup styleClass="glyphicon glyphicon-chevron-up"></h:panelGroup>
		        <h:outputText value="#{msg['main.templa.backtop.button']}" />
		    </a>
		</h:panelGroup>
	</h:panelGroup>
	<!-- Static main menu navigation bar -->
	<nav class="navbar navbar-default navbar-fixed-top"> 
		<h:panelGroup layout="block" styleClass="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<h:panelGroup layout="block" styleClass="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbarForm\:main-navbar"
					aria-expanded="false">
					<h:panelGroup class="sr-only">
						<h:outputText value="#{msg['main.template.toggle']}" />
					</h:panelGroup> 
					<h:panelGroup class="icon-bar"></h:panelGroup> 
					<h:panelGroup class="icon-bar"></h:panelGroup> 
					<h:panelGroup class="icon-bar"></h:panelGroup>
				</button>
				<!-- Trademark icon -->
				<h:panelGroup styleClass="navbar-header main-nav-header" layout="block">
					<a id="trademark-icon-container" class="navbar-brand" href="#"> 
						<h:graphicImage id="trademark-icon" value="/resources/media/trademark-icon.png" />
					</a>
					<h3 id="navbarTitle">
						<h:outputText value="#{msg['navbar.title']}" />
						<br/>
						<small>
							<h:outputText value="#{msg['navbar.slogan']}" />
						</small>
					</h3>
				</h:panelGroup>
			</h:panelGroup>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<h:form id="navbarForm">
				<h:panelGroup id="main-navbar" layout="block" styleClass="collapse navbar-collapse">
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a href="#{urlMapperMB.homeURL}">
								<h:panelGroup styleClass="glyphicon glyphicon-home" />
							</a>
						</li>
						<h:panelGroup rendered="#{authorityMB.uploadProductsAllowed}">
							<li>
								<h:outputLink value="#{urlMapperMB.uploadContentURL}">
									<h:outputText value="#{msg['main.template.uploadContent']}" />
								</h:outputLink>
							</li>
						</h:panelGroup>
						<li>
							<h:commandLink value="#{msg['main.template.top10']}" />
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" 
								aria-haspopup="true" aria-expanded="false"> 
								<h:outputText value="#{msg['main.template.categories']}" />
								<h:panelGroup styleClass="caret" />
							</a>
							<ul class="dropdown-menu">
								<li><a href="#">
									<h:outputText value="#{msg['main.template.clothes']}" />
								</a></li>
								<li><a href="#">
									<h:outputText value="#{msg['main.template.watches']}" />
								</a></li>
								<li><a href="#">
									<h:outputText value="#{msg['main.template.technology']}" />
								</a></li>
								<li role="separator" class="divider"></li>
								<li><a href="#">
									<h:outputText value="#{msg['main.template.outlet']}" />
								</a></li>
							</ul>
						</li>
						<!-- Login button -->
						<h:panelGroup rendered="#{!loginMB.signedIn}">
							<li>
								<a href="#{urlMapperMB.signInURL}">
									<h:outputText value="#{msg['main.template.login']}" />
								</a>
							</li>
						</h:panelGroup>
						<!-- Profile dropdown -->
						<h:panelGroup rendered="#{loginMB.signedIn}">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" 
									data-toggle="dropdown" role="button" 
									aria-haspopup="true" aria-expanded="false"> 
										<h:panelGroup styleClass="glyphicon glyphicon-user" />
										<h:outputText value="#{msg['main.template.welcome']}" /> 
										<h:outputText value="#{userDetailsMB.fullName}" />
									<h:panelGroup styleClass="caret" />
								</a>
								<ul class="dropdown-menu">
									<li><a href="#{urlMapperMB.accountManager}">
										<h:outputText value="#{msg['main.template.settings']}" />
									</a></li>
									<li role="separator" class="divider"></li>
									<li id="logoutBtnContainer">
										<h:commandButton id="logoutButton"
											action="#{loginMB.doLogout()}" 
											value="#{msg['main.template.logout']}"
											styleClass="btn btn-danger btn-block">
											<f:param name="#{_csrf.parameterName}" 
											value="#{_csrf.token}" />
										</h:commandButton>
									</li>
								</ul>
							</li>
						</h:panelGroup>
					</ul>
				</h:panelGroup>
			</h:form>
		</h:panelGroup>
	</nav>
	
	<!-- Navbar back to allow the other components to not be hidden by this bar -->
	<h:panelGroup layout="block" styleClass="navbar-back" />
</ui:composition>